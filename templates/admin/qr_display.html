
<!-- templates/admin/qr_display.html - QR code printing page -->
{% extends "base.html" %}

{% block title %}QR Code - {{ locker.name }}{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-lg-6">
        <div class="card border-0 shadow">
            <div class="card-header-fire card-header text-center">
                <h4 class="mb-0"><i class="bi bi-qr-code"></i> {{ locker.name }} QR Code</h4>
            </div>
            <div class="card-body text-center p-4">
                <h5 class="mb-3">{{ locker.truck }} - {{ locker.name }}</h5>
                <p class="text-muted">{{ locker.description }}</p>
                
                <!-- QR Code Image -->
                <div class="mb-4 p-4 bg-light rounded">
                    <img src="data:image/png;base64,{{ qr_image }}" alt="QR Code for {{ locker.name }}" class="img-fluid" style="max-width: 300px;">
                </div>
                
                <div class="alert alert-info text-start">
                    <strong>QR Code Details:</strong><br>
                    <code class="small">{{ qr_url }}</code><br><br>
                    <strong>Instructions:</strong><br>
                    • Print this QR code<br>
                    • Laminate for durability<br>
                    • Affix inside {{ locker.name }} where visible<br>
                    • Test scan before final installation
                </div>
                
                <div class="row text-start mb-4">
                    <div class="col-6">
                        <strong>Locker:</strong> {{ locker.name }}<br>
                        <strong>Truck:</strong> {{ locker.truck }}<br>
                        <strong>QR ID:</strong> {{ qr_code }}
                    </div>
                    <div class="col-6">
                        <strong>Department:</strong> Espanola Fire<br>
                        <strong>Created:</strong> {{ moment().format('YYYY-MM-DD') if moment else 'Today' }}<br>
                        <strong>Status:</strong> <span class="badge bg-success">Active</span>
                    </div>
                </div>
                
                <div class="d-grid gap-2">
                    <button onclick="window.print()" class="btn btn-fire">
                        <i class="bi bi-printer"></i> Print QR Code
                    </button>
                    <a href="{{ url_for('locker_detail', qr_code=qr_code) }}" class="btn btn-outline-primary">
                        <i class="bi bi-eye"></i> Test QR Code
                    </a>
                    <a href="{{ url_for('admin_dashboard') }}" class="btn btn-outline-secondary">
                        <i class="bi bi-arrow-left"></i> Back to Admin
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
@media print {
    .navbar, .footer, .btn, .alert {
        display: none !important;
    }
    .card {
        border: none !important;
        box-shadow: none !important;
    }
    .card-header-fire {
        background-color: #000 !important;
        color: #fff !important;
    }
    body {
        background-color: #fff !important;
    }
    .col-lg-6 {
        max-width: 100% !important;
    }
}
</style>
{% endblock %}